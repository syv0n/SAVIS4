<div class="linearRegressionBox">
<!-- header -->
<app-navbar></app-navbar>

<!-- links container -->
<div class="links-container">
  <a
    class="btn manual-btn"
    type="button"
    [routerLink]="['/regression']"
    target="_blank"
    rel="noopener norefferer">
       {{"button_toGuide"|translate}}{{"homepage_Linear_Regression_Visualization" | translate}}
  </a>
  
  <a
    class="btn problems-btn"
    type="button"
    [routerLink]="['/problems-regression']"
    target="_blank"
    rel="noopener norefferer">
      {{"button_toPP"|translate}}{{"homepage_Linear_Regression_Visualization" | translate}}
  </a>
</div>

<!-- contents -->
<h1 class="text-center py-4">{{ 'lr_title' | translate }}</h1>
<div class="container">
    <div class="lhs">
      <form #myForm="ngForm">
        <div id="control" class="input-container">
          <label for="dataPoints">{{ 'lr_enter_data' | translate }}:</label>
          <br>
          <textarea 
            class="textarea border-2 border-gray-900 rounded-md" 
            [value]="csvContent" 
            id="dataPoints" 
            name="dataPoints" 
            [(ngModel)]="datapoints"
            placeholder="{{ 'lr_placeholder' | translate }}"
            >
          </textarea>
          <!-- <csv-file-upload class="textarea" id="dataPoints" name="dataPoints" [(ngModel)]="datapoints" placeholder="e.g., 1,3\n2,5\n3,7"></csv-file-upload> -->
          <br>
          <div class="d-flex">
            <button class="btn" (click)="updateChart()">{{ 'lr_update_chart' | translate }}</button>
            <label class="file-input mx-2">
              <input 
              class="hidden" 
              type="file" 
              (change)="onFileSelect($event)" 
              accept=".csv">
              <span class="btn">{{ 'lr_choose_file' | translate }}</span>
            </label>
          </div>
          
          <!-- Export buttons -->
          <div class="form-group mt-3">
            <button class="btn" id="export-pdf-btn" (click)="exportAsPDF()" [disabled]="parsedDatapoints.length === 0">Export as PDF</button>
          </div>
          <div class="form-group mt-3">
            <button class="btn" id="export-docx-btn" (click)="exportAsDOCX()" [disabled]="parsedDatapoints.length === 0">Export as DOCX</button>
          </div>
          <app-save-load-buttons 
            [data]="datapoints"
            [feature]="'linearRegression'"
          ></app-save-load-buttons>
        </div>
      </form>
    </div>

      <div class="rhs">
  <div class="chart-and-controls">
    <div class="chart">
      <app-scatter-plot 
        class="chartData" 
        [dataPoints]="parsedDatapoints">
      </app-scatter-plot>
    </div>
    
    <div class="controls-sidebar">
      <div class="control-item" title="Click and drag the line up or down">
        <svg width="32" height="32" viewBox="0 0 24 24">
          <path d="M12 3L12 21M8 7L12 3L16 7M8 17L12 21L16 17" stroke="currentColor" fill="none" stroke-width="2"/>
        </svg>
        <span>{{ 'lr_drag_move' | translate }}</span>
      </div>
      
      <div class="control-item" title="Hold Shift key and drag to rotate the line">
        <svg width="32" height="32" viewBox="0 0 24 24">
          <path d="M12 3A9 9 0 1 0 21 12" stroke="currentColor" fill="none" stroke-width="2"/>
          <path d="M18 9L21 12L18 15" stroke="currentColor" fill="none" stroke-width="2"/>
        </svg>
        <span>{{ 'lr_shift_rotate' | translate }}</span>
      </div>
      
      <div class="control-item" title="Use arrow keys for precise adjustments">
        <svg width="32" height="32" viewBox="0 0 24 24">
          <rect x="4" y="4" width="16" height="16" rx="2" stroke="currentColor" fill="none" stroke-width="2"/>
          <path d="M12 8V16M8 12L12 8L16 12" stroke="currentColor" fill="none" stroke-width="2"/>
        </svg>
        <span>{{ 'lr_arrow_keys' | translate }}</span>
      </div>
    </div>
  </div>
</div>
  <!-- footer -->
  <footer class="static-footer">
    {{ "nav_copyright" | translate }}
  </footer>
</div>